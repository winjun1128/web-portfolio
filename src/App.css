/* ===============================
   Global
================================ */
.App{
  text-align:center;
  padding:16px 16px calc(16px + env(safe-area-inset-bottom));
  background:#fff;
}

h4{ color:#f59e0b; }

/* 색/그림자 토큰 */
:root{
  --card-bg:#ffffff;
  --card-bg2:#f8fafc;
  --card-border:#e5e7eb;
  --card-accent:#f59e0b;      /* 주황 포인트 */
  --sep-fill: color-mix(in srgb, var(--card-accent) 10%, #fff7e6); /* 내부 구분띠 색 */
  --sep-line: color-mix(in srgb, var(--card-accent) 35%, #fff);
  --shadow-sm:0 2px 8px rgba(0,0,0,.06);
  --shadow-lg:0 12px 24px rgba(0,0,0,.12);
}

.App > h1{
  margin:8px 0 20px;
  font-size:1.9rem;
  letter-spacing:-.2px;
}

/* ===============================
   카드(상단) & 역할 패널(하단-항상 펼침)
   => 두 컴포넌트를 "한 덩어리"처럼 보이게
================================ */
.port-container,
.port-role-container{
  width:100%;
  max-width:1200px;
  display:flex;
  gap:24px;
  margin:24px auto 0;
  background:linear-gradient(180deg,var(--card-bg),var(--card-bg2));
  border:2px solid var(--card-border);
  border-radius:16px;
  box-shadow:var(--shadow-sm);
  position:relative;
  overflow:hidden;
  transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .3s ease;
}

/* 첫 카드만 상단 여백 제거 */
.port-container:first-of-type{ margin-top:0; }

/* 좌측 주황 포인트 바(항상 표시) */
.port-container::before,
.port-role-container::before{
  content:"";
  position:absolute; left:0; top:0; bottom:0;
  width:6px; background:var(--card-accent); opacity:.9;
  pointer-events:none;
}

/* 카드에서는 상단 라운드에 맞춰 살짝 둥글게 */
.port-container::before{ border-radius:16px 0 0 0; }
/* 역할 패널에서는 하단 라운드 */
.port-role-container::before{ border-radius:0 0 0 16px; }

/* Hover 효과(데스크톱) */
.port-container:hover,
.port-container:focus-within{
  transform:translateY(-4px);
  box-shadow:var(--shadow-lg);
  border-color:var(--card-accent);
  background:linear-gradient(180deg,#fff, color-mix(in srgb, var(--card-accent) 6%, #fff));
}

/* 레이아웃 비율 */
.port-video{ flex:1 1 0; min-width:0; display:flex; }
.port-info { flex:1 1 0; min-width:0; text-align:left; background:beige; padding:16px 20px; }

/* 비디오(위/아래 동일) */
.port-video video{
  width:100%; height:100%;
  aspect-ratio:16/9;
  object-fit:cover;
  display:block;
  border-radius:12px;
  transition:transform .25s ease, box-shadow .25s ease;
}
.port-container:hover .port-video video{
  transform:scale(1.02);
  box-shadow:0 18px 40px rgba(0,0,0,.30), 0 6px 12px rgba(0,0,0,.18), 0 0 0 1px color-mix(in srgb, var(--card-accent) 35%, #0000);
}

/* 링크 줄바꿈 */
.port-info a{ overflow-wrap:anywhere; }

/* ===============================
   정보 영역 타이포/링크
================================ */
.port-info h3{
  margin:0 0 10px 0;
  font-size:1.15rem;
  font-weight:800;
  letter-spacing:-.2px;
  color:#222;
}
.port-info p{
  margin:0;
  padding:10px 0;
  border-top:1px dashed var(--card-border);
}
.port-info p:first-of-type{ border-top:0; }

/* 라벨 칩 */
.port-info p > strong{
  display:inline-block;
  margin-right:8px;
  padding:2px 10px;
  border-radius:999px;
  font-weight:700;
  line-height:1.1;
  color: color-mix(in srgb, var(--card-accent) 65%, #111);
  background: color-mix(in srgb, var(--card-accent) 14%, #fff);
  border:1px solid color-mix(in srgb, var(--card-accent) 35%, #fff);
}

/* 링크 스타일 */
.port-info a{
  font-weight:600;
  text-decoration:underline;
  text-decoration-color:transparent;
  text-underline-offset:3px;
  transition:color .18s ease, text-decoration-color .18s ease, box-shadow .18s ease;
  color: color-mix(in srgb, var(--card-accent) 40%, #0b79f7);
}
.port-info a:hover,
.port-info a:focus-visible{
  color: color-mix(in srgb, var(--card-accent) 65%, #0b79f7);
  text-decoration-color:currentColor;
  box-shadow:inset 0 -8px 0 color-mix(in srgb, var(--card-accent) 18%, #ffd);
}

/* ===============================
   "연속 테두리" + "색 분리선" 구현
   - 카드 아래쪽 테두리는 제거
   - 대신 내부에 컬러 구분띠를 그려서 여백 없이 구분
================================ */
.port-container:has(+ .port-role-container.open){
  border-bottom:0;                           /* 외곽선 연결을 위해 제거 */
  border-bottom-left-radius:0;
  border-bottom-right-radius:0;
  position:relative;
}

/* 내부 구분 띠(Separator) */
.port-container:has(+ .port-role-container.open)::after{
  content:"";
  position:absolute; left:0; right:0; bottom:0;
  height:18px;                               /* 띠 두께 */
  background: var(--sep-fill);               /* 어울리는 배경색 */
  border-top:1px solid var(--sep-line);      /* 얇은 라인으로 구분감 */
  z-index:1;                                 /* 내부 콘텐츠 위, 외곽선 아래 */
}

/* 역할 패널은 상단 테두리 제거하고 이어 붙이기 */
.port-role-container{
  border-top:0;
  border-left-color:var(--card-border);
  border-right-color:var(--card-border);
  border-bottom-color:var(--card-border);
  border-radius:0 0 16px 16px;
  margin-top:0;                              /* 위와 딱 붙음 */
}

/* Hover 시 위/아래 외곽선 색도 동기화 */
.port-container:hover + .port-role-container.open,
.port-container:focus-within + .port-role-container.open{
  border-left-color:var(--card-accent);
  border-right-color:var(--card-accent);
  border-bottom-color:var(--card-accent);
}

/* 역할 내부 레이아웃 */
.port-role-inner{ overflow:hidden; display:flex; gap:24px; }
.port-role-inner .port-video{ flex:1 1 0; min-width:0; display:flex; }
.port-role-inner .port-info{ flex:1 1 0; min-width:0; text-align:left; background:beige; padding:16px 20px; }

/* ===============================
   크기 동기화
================================ */
.port-container,
.port-role-container.open .port-role-inner{
  min-height:360px; /* 필요 시 320~420로 조절 */
}

/* 마지막 섹션 바닥 여백 */
.App > .port-role-container.open:last-child{
  margin-bottom:12vh;
}

/* ===============================
   모바일(<=768px)
================================ */
@media (max-width:768px){
  .App{ padding:12px 12px calc(12px + env(safe-area-inset-bottom)); }

  .port-container,
  .port-role-container{
    max-width:100%;
    gap:12px;
    border-radius:12px;
  }

  .port-container{
    flex-direction:column;
    align-items:stretch;
    box-shadow:var(--shadow-sm);
  }

  /* 포인트 바는 상단 전체 라인으로 유지하고, 역할에도 이어지게 */
  .port-container::before,
  .port-role-container::before{
    left:0; right:unset; top:0; bottom:auto;
    width:100%; height:4px; border-radius:0;
  }

  .port-video{ order:1; }
  .port-info { order:2; padding:12px 14px; font-size:.95rem; }
  .port-info h3{ font-size:1rem; margin-bottom:8px; }
  .port-info p{ padding:8px 0; }
  .port-info p > strong{ padding:2px 8px; font-size:.9em; }
  .port-info a{ word-break:break-all; }

  .port-video video{
    width:100%; height:auto;
    aspect-ratio:16/9; object-fit:cover;
    border-radius:10px;
  }

  .port-role-inner{ flex-direction:column; gap:12px; }

  /* 내부 구분띠(모바일은 얇게) */
  .port-container:has(+ .port-role-container.open)::after{
    height:12px;
  }

  /* 터치 환경 hover 완화 */
  @media (hover:none){
    .port-container:hover,
    .port-container:focus-within{
      transform:none; box-shadow:var(--shadow-sm);
    }
  }
}

/* ===============================
   모션 민감
================================ */
@media (prefers-reduced-motion: reduce){
  .port-container, .port-role-container{ transition:none !important; }
}
/* === [PATCH] 포인트 바를 구분바(Separator)까지 연장 === */
/* 구분바(::after)의 배경에 왼쪽 6px 주황 스트라이프를 함께 그리기 */
.port-container:has(+ .port-role-container.open)::after{
  /* 기존 height:18px, border-top 그대로 유지 가능 */
  /* 틈새를 덮도록 2px 아래로 겹치기 */
  bottom:-2px;                 /* ← 역할 패널과의 경계 살짝 오버랩 */
  height:20px;                 /* 살짝 키워 경계선 가림 */
  z-index:2;

  /* 왼쪽 포인트바(6px) + 구분바 배경 2중 배경 */
  background:
    linear-gradient(90deg, var(--card-accent) 0 6px, transparent 6px),
    var(--sep-fill);
}

/* 호버할 때 구분바 상단 라인도 포인트 색으로 동기화 */
.port-container:hover::after,
.port-container:focus-within::after{
  border-top-color: var(--card-accent);
}

/* === [PATCH] 호버 시 위/아래 블록 높이 차이(틈새) 제거 === */
/* 카드가 위로 살짝 떠오를 때, 아래 역할 패널도 같이 이동 */
.port-role-container{ 
  transition: transform .2s ease, border-color .2s ease;
}
.port-container:hover + .port-role-container.open,
.port-container:focus-within + .port-role-container.open{
  transform: translateY(-4px);   /* 카드의 hover transform과 동일 */
  border-left-color: var(--card-accent);
  border-right-color: var(--card-accent);
  border-bottom-color: var(--card-accent);
}

/* hover 중에도 ‘연속 테두리’ 유지: 카드 하단 테두리가 다시 생기지 않게 */
.port-container:hover:has(+ .port-role-container.open){
  border-bottom-color: transparent;
}

/* (선택) 작은 디스플레이에서 구분바 오버랩 값 미세 조정 */
@media (max-width: 768px){
  .port-container:has(+ .port-role-container.open)::after{
    bottom:-1px;
    height:14px;
  }
}
/* =========================================
   PATCH 1) 구분바·롤컨테이너 hover 시 포인트바 숨기기
   - 좌측 주황 포인트바(::before) 투명화
   - 구분바(::after)의 주황 스트라이프 제거
========================================= */
.port-container::before,
.port-role-container::before{
  transition: opacity .18s ease;
}

.port-container:hover::before,
.port-container:focus-within::before,
.port-role-container:hover::before,
.port-role-container:focus-within::before{
  opacity: 0; /* 포인트바 감추기 */
}

/* 구분바에 그려둔 주황 스트라이프 제거(카드 hover/포커스·롤 hover 모두) */
.port-container:hover::after,
.port-container:focus-within::after,
.port-container:has(+ .port-role-container.open:hover)::after,
.port-container:has(+ .port-role-container.open:focus-within)::after{
  background: var(--sep-fill);     /* 스트라이프 없는 배경 */
  border-top-color: var(--card-accent);
}

/* =========================================
   PATCH 2) 롤컨테이너에도 카드와 동일한 hover 효과
   - 그림자/보더/배경 강조
   - 내부 비디오 확대 효과
   - 이음새 틈새 방지 위해 카드도 함께 동기 이동
========================================= */
/* 롤 hover 자체 효과 */
.port-role-container{
  transition: transform .2s ease, border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
.port-role-container:hover,
.port-role-container:focus-within{
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-left-color: var(--card-accent);
  border-right-color: var(--card-accent);
  border-bottom-color: var(--card-accent);
  background: linear-gradient(180deg, #fff, color-mix(in srgb, var(--card-accent) 6%, #fff));
}

/* 롤 hover 시 비디오 확대/그림자 */
.port-role-container:hover .port-video video,
.port-role-container:focus-within .port-video video{
  transform: scale(1.02);
  box-shadow: 0 18px 40px rgba(0,0,0,.30), 0 6px 12px rgba(0,0,0,.18), 0 0 0 1px color-mix(in srgb, var(--card-accent) 35%, #0000);
}

/* 롤 hover 때 카드도 함께 색상/이동 동기화 → 이음새 틈새 방지 */
.port-container:has(+ .port-role-container.open:hover),
.port-container:has(+ .port-role-container.open:focus-within){
  transform: translateY(-4px);
  border-color: var(--card-accent);
  box-shadow: var(--shadow-lg);
}

/* 연속 테두리 유지: 카드 하단 테두리는 계속 투명 */
.port-container:has(+ .port-role-container.open:hover){
  border-bottom-color: transparent;
}

/* 구분바 오버랩(틈새 방지) 재적용 */
.port-container:has(+ .port-role-container.open:hover)::after{
  bottom: -2px;
  height: 20px;
  background: var(--sep-fill); /* 스트라이프 없이 */
  border-top-color: var(--card-accent);
}

/* 모바일에서 미세 조정 */
@media (max-width:768px){
  .port-container:has(+ .port-role-container.open:hover)::after{
    bottom:-1px;
    height:14px;
  }
}
/* ============================
   MOBILE PATCH: 하나의 블록 테두리, 포인트바 제거
   (<=768px에서만 적용)
============================ */
@media (max-width: 768px){

  /* 1) 포인트바(상단 라인) 완전 제거 */
  .port-container::before,
  .port-role-container::before{
    display: none !important;
    content: none !important;
  }

  /* 2) 구분바(Separator)도 제거 → 하나의 면처럼 */
  .port-container:has(+ .port-role-container.open)::after{
    display: none !important;
    content: none !important;
  }

  /* 3) 두 블록을 한 덩어리처럼: 윗 블록은 하단 테두리 제거,
        아래 블록은 상단 테두리 제거 + 아래쪽 테두리 유지 */
  .port-container:has(+ .port-role-container.open){
    border-bottom: 0;                     /* 중간 seam 제거 */
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
  .port-role-container{
    border-top: 0;                         /* 중간 seam 제거 */
    border-left-color: var(--card-border); /* 외곽선을 역할이 이어받음 */
    border-right-color: var(--card-border);
    border-bottom-color: var(--card-border);
    border-radius: 0 0 12px 12px;          /* 아래쪽만 둥글게 */
    box-shadow: var(--shadow-sm);          /* 카드와 톤 맞춤 */
  }

  /* 4) 여백은 외부에서만: 두 블록 사이 margin 제거 */
  .port-role-container.open{
    margin-top: 0 !important;
    margin-bottom: 24px;                   /* 다음 카드와 간격 */
  }

  /* 5) 터치 환경 hover 무효화로 미세 흔들림 방지(이미 있었으면 그대로) */
  @media (hover:none){
    .port-container:hover,
    .port-container:focus-within,
    .port-role-container:hover,
    .port-role-container:focus-within{
      transform: none;
      box-shadow: var(--shadow-sm);
      border-color: var(--card-border);
    }
  }
}

/* === MOBILE: 단일 블록을 주황색 테두리로 === */
@media (max-width: 768px){
  /* 카드가 역할을 동반할 때: 카드(윗부분) 테두리 주황 + 하단은 제거 */
  .port-container:has(+ .port-role-container.open){
    border-color: var(--card-accent) !important;
    border-bottom: 0 !important;           /* 중간 이음새 제거 */
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
  }

  /* 역할(아래부분) 테두리도 주황으로 이어받기 */
  .port-role-container{
    border-top: 0 !important;
    border-left-color: var(--card-accent) !important;
    border-right-color: var(--card-accent) !important;
    border-bottom-color: var(--card-accent) !important;
    border-radius: 0 0 12px 12px;          /* 아래쪽만 둥글게 */
  }

  /* 터치환경에서도 주황 테두리 유지 */
  @media (hover:none){
    .port-container:has(+ .port-role-container.open),
    .port-role-container{
      border-color: var(--card-accent) !important;
      box-shadow: var(--shadow-sm);
      transform: none;
    }
  }
}
